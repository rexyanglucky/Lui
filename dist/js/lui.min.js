function LuiCheckBox(){this.selector="luicheck",this.param={}}function LuiDropDownList(){this.param=null,this.selector=""}function Lui(){this.checkBox=null}function LuiTree(){function t(t,e,i,n,s,c){function l(t,e){for(var i=[],n=0;n<t.length;n++){var s=t[n];s[a.parentField]===e&&i.push(s)}return i}var r="";e||(e=t[0]);var d=a.nameField||"name",o=a.idField||"id",h=a.warpid||"tree_1",u=l(t,i),p=n>=a.showlevel||0;if(u.length>0){r+=s==c-1?'<li class="parent-last">':"<li>",r+=p?'<i class="icon icon_op close"></i>':'<i class="icon icon_op open"></i>',r+=a.showParentCheckBox?'<luicheck class="lui_checkbox"  data-type="parent" data-showcheckbox="0" data-name="'+h+'" data-level="'+n+"\" data-json='"+escape(JSON.stringify(e))+"'  data-val=\""+e[o]+'" data-text="'+e[d]+'" data-checked="0"></luicheck>':'<luicheck class="lui_checkbox"  data-type="parent" data-showcheckbox="1" data-name="'+h+'" data-level="'+n+"\" data-json='"+escape(JSON.stringify(e))+"'  data-val=\""+e[o]+'" data-text="'+e[d]+'" data-checked="0"></luicheck>',r+=p?'<ul class="dn">':"<ul>";for(var k=0;k<u.length;k++){var v=n+1;r+=arguments.callee(t,u[k],u[k][o],v,k,u.length)}r+="</ul>",r+="</li>"}else r+=s==c-1?'<li class="leaf-last">':'<li class="leaf">',r+=a.showCheckBox?'<luicheck class="lui_checkbox" data-type="leaf"  data-showcheckbox="0" data-name="'+h+'" data-level="'+n+"\" data-json='"+escape(JSON.stringify(e))+"'  data-val=\""+e[o]+'" data-text="'+e[d]+'" data-checked="0"></luicheck>':'<luicheck class="lui_checkbox" data-type="leaf"  data-showcheckbox="1" data-name="'+h+'" data-level="'+n+"\" data-json='"+escape(JSON.stringify(e))+"'  data-val=\""+e[o]+'" data-text="'+e[d]+'" data-checked="0"></luicheck>';return r}var a;this.selector="",this.param=null,this.init=function(e){if(e){e.showParentCheckBox=!e.isOnlyLeafCallBack,this.param=a=e;var i=a.data,n=(a.nameField||"name",a.idField||"id"),s=a.warpid||"tree_1";this.selector=this.warpid="#"+s;var c=t(i,i[0],i[0][n],0,0,i.length),l=$("#"+s);l.html("<ul>"+c+"</ul>"),l.addClass("lui_tree_warp"),l.find(".icon_op").click(function(){$(this).hasClass("close")?($(this).removeClass("close").addClass("open"),$(this).siblings("ul").show(200)):($(this).removeClass("open").addClass("close"),$(this).siblings("ul").hide(200))});var r=new Lui;return r.initCheckBox({group:s}),l.find("luicheck").click(function(){var t=$(this),e="leaf"==t.attr("data-type"),i=t.prev("i.icon_op");if(a.isOnlyLeafCallBack&&!e&&i)return void i.click();if(e||a.showParentCheckBox&&(r.checkBox.ischeckElement(this)?t.siblings("ul").find("luicheck").each(function(t,a){r.checkBox.ischeckElement(a)||(litem=a,lui.checkBox.setClickStyle(a))}):t.siblings("ul").find("luicheck").each(function(t,a){r.checkBox.ischeckElement(a)&&lui.checkBox.setClickStyle(a)})),a.selectedCallBack&&a.showCheckBox){var n=t.attr("data-name"),s=r.checkBox.getJsonValue(n);a.selectedCallBack(n,s)}}),this}}}function LuiWordSpeak(){this.selector="lui_wordspeak",this.param={},this.play=function(t){var a=document.getElementById("lui_div_speak");a.innerHTML='<embed src="'+t+'" loop="0" autostart="true" hidden="true"></embed>';var e=document.getElementsByTagName("EMBED")[0];e&&(a.disabled=!0)}}LuiCheckBox.prototype={constructor:LuiCheckBox,init:function(t){var a=this;return t&&t.group&&(this.selector='luicheck[data-name="'+t.group+'"]'),this.param=t,$(this.selector).each(function(e,i){var n=1==$(i).attr("data-checked")?"check_sel":"",s=1!=$(i).attr("data-showcheckbox"),c=$(i).attr("data-text"),l='<i class="icon_check '+n+' "></i>',r='<span class="check_text"  onselectstart="return false;" >'+c+"</span>";l=s?l+r:r,$(i).append(l),$(i).css({cursor:"pointer"}),$(i).unbind("click"),$(i).bind("click",function(){var e=$(this).attr("data-checked");if(1==e?($(this).attr("data-checked",0),$(this).children("i").removeClass("check_sel")):($(this).attr("data-checked",1),$(this).children("i").addClass("check_sel")),t.callback){var n=$(i).attr("data-name"),s=a.getJsonValue(n);t.callback(n,s)}})}),this},setValue:function(t,a){$(this.selector).filter('[data-name="'+t+'"]').filter('[data-val="'+a+'"]').each(function(t,a){var e=$(a).attr("data-checked");1==e||$(a).click()})},getValue:function(t){var a=[];$(this.selector).filter('[data-name="'+t+'"]').each(function(t,e){var i=$(e).attr("data-checked");1==i&&a.push($(e).attr("data-val"))}),alert(a.join(","))},getJsonValue:function(t){var a=[];return $(this.selector).filter('[data-name="'+t+'"]').each(function(t,e){var i=$(e).attr("data-checked");if(1==i){var n=$(e).attr("data-json");n&&a.push(JSON.parse(unescape(n)))}}),a},ischeck:function(t,a){var e=$(this.selector).filter('[data-name="'+t+'"]').filter('[data-val="'+a+'"]')[0],i=$(e).attr("data-checked");return 1==i},ischeckElement:function(t){var a=$(t).attr("data-checked");return 1==a},setClickStyle:function(t){var a=$(t).attr("data-checked");1==a?($(t).attr("data-checked",0),$(t).children("i").removeClass("check_sel")):($(t).attr("data-checked",1),$(t).children("i").addClass("check_sel"))}};var dropcount=1e3;LuiDropDownList.prototype={constructor:LuiDropDownList,init:function(t){this.selector=this.warpid="#"+t.warpid;var a=t.warpid,e=t.data,i=t.width=t.width||180,n=t.height=t.height||200,s=t.subtextlength=t.subtextlength||5;t.valueField=t.valueField||"id",t.textField=t.textField||"name";var c=t.valueField,l=t.textField,r=t.selectedCallBack,d=(t.loadedCallBack,t.zindex);if(0===t.data.length){var o={};o[c]=-1,o[l]="",e.push(o),n=0}var h=t.defaultValue=t.defaultValue||e[0][c],u=t.defaultText=t.defaultValue||e[0][l];this.param=t;var p="<div class='dropdiv dn'>";p+='  <ul class="dropul" style="max-height:'+n+'px;overflow:auto;" data-id="'+h+'" data-name="'+u+'">';for(var k=0;k<e.length;k++){var v=e[k],f=v[l].length>s?v[l].substring(0,s)+"...":v[l],m="<li title="+v[l]+" data-index="+k+" data-id="+v[c]+" data-tag='"+JSON.stringify(e[k])+"'>"+f+"</li>";p+=m}p+="</ul>",p+="</div>";var x=' <span style="width: '+i+'px;" class="dib"><span data-type="dropdownlist_drop_span">'+u+'</span> <i class="num_down"></i></span>',w=$("#"+a);w.css({width:i}),w.addClass("lui_dropdownlist"),w.html(x),w.append(p),d&&(w.find(".dropdiv").css("z-index",d),w.attr("zindex",d)),w.addClass("btn_num_updown").addClass("btn_num_updown1").addClass("dib"),w.attr("title",u);var g=$("#"+a+" ul"),C=$("#"+a+" .dropdiv"),_=$("#"+a+" ul li"),b=w.find("span[data-type='dropdownlist_drop_span']");return w.click(function(){return g.is(":visible")?C.slideUp(200):($(".dropdiv").slideUp(200),C.slideDown(200)),!1}),$("body").click(function(){$(".dropdiv").slideUp(200)}),_.click(function(){var t=$(this).attr("data-id"),e=$(this).html(),i=$(this).attr("data-josn"),n=$(this).attr("title");return b.text(e),b.attr("data-id",t),b.attr("data-json",i),b.attr("title",n),w.attr("title",n),r&&r(a,t,n),C.slideUp(200),!1}),this.span=b,this.setValue(h),this},getValue:function(){if(this.param.data.length>0){var t=this.span;return{value:t.attr("data-id"),text:t.attr("title"),zindex:$(this.selector).attr("zindex")}}return{value:-1,text:""}},getSelectedJsonValue:function(){if(this.param.data.length>0){var t=this.span;return JSON.parse(t.attr("data-json"))}return null},setValue:function(t){for(var a,e="",i=this.span,n=0;n<this.param.data.length;n++){var s=this.param.data[n];if(s[this.param.valueField]==t){e=s[this.param.textField],a=s;break}}i.attr("data-id",t),i.attr("data-json",JSON.stringify(a)),i.attr("title",e),$(this.selector).attr("title",e);var c=t,l=e,r=e.length>this.param.subtextlength?e.substring(0,this.param.subtextlength)+"...":e;return i.text(r),this.param.loadedCallBack&&this.param.loadedCallBack(containerId,c,l),this}},Lui.prototype={constructor:Lui,initTree:function(t){var a=new LuiTree;return a.init(t)},initDropDownList:function(t){var a=new LuiDropDownList;return a.init(t)},initCheckBox:function(t){this.checkBox||(this.checkBox=new LuiCheckBox);var a=new LuiCheckBox;return a.init(t)},initWordSpeak:function(t){this.wordspeak||(this.wordspeak=new LuiWordSpeak);var a=new LuiWordSpeak;return a.init(t)}},LuiTree.prototype={constructor:LuiTree,setLocation:function(t){},getSelectedJsonValue:function(){if(this.param.showParentCheckBox||this.param.showParentCheckBox){var t=new Lui,a=lui.checkBox.getJsonValue();return t=null,a}},openNode:function(t,a,e){}},LuiWordSpeak.prototype={constructor:LuiWordSpeak,init:function(t){var a=this,e='<div class="lui_div_speak" id="lui_div_speak"/>';return $("body").append(e),$(".lui_wordspeak").each(function(t,e){$(e).unbind("mouseover"),$(e).bind("mouseover",function(){var t=$(e).attr("data-src");a.play(t)})}),a}};